## 2024/01/10

- fix: 修复B站动态 `-352` 的风控报错。

## 2023/12/29

- fix: 修复转发动态内的头像无法加载问题。

## 2023/12/29

- 动态链接返回新版动态链接，新版链接可看的带图评论。

## 2023/12/26

- fix: 修复直播图无法渲染的问题。

## 2023/12/24

- fix: js 全面本地化，不使用 cdn ，解决截图超时失败的问题。

## 2023/12/06

- 修复专栏内容空白问题；

## 2023/09/12

- 支持 `v3` 的 `go-cqhttp` 模式。

## 2023/09/08

- fix: 修复常规图片动态类型为 `MAJOR_TYPE_OPUS` 时无法处理的问题
- 优化推送动态方式为异步执行，避免截图过慢导致动态再次被推送。

## 2023/06/02

- 修复头像加载失败问题；

## 2023/05/30

- 修复专栏动态类型为 `MAJOR_TYPE_OPUS` 时无法处理的问题。
- 兼容B站新改的`css`选择器；
- 修复图片上传失败问题；

## 2023/05/29

- 优化 `css`，修复动态的粉丝编号变形问题。

## 2023/05/25

- 修复上个提交产生的 `util.js` 404 导致渲染失败问题。
- 增加 `cookie` 字段配置个人B站CK，用来绕过反爬（目测还可以）。
- 重构 `filterDynamicType` 字段，更准确的过滤动态内容。

## 2023/05/25

- 修复动态图底部生成时间错误的问题。

## 2023/05/24

- 添加按动态类型进行过滤的功能，可配置 `filterDynamicType` 属性进行管理。

## 2023/05/24

- 修复B站动态的 `-352` 报错；
- 优化自定义渲染图中装扮拉伸问题；
- 去除图片的向 `redis` 缓存存储，减轻 `redis` 压力（目前图片比较清晰，也比较大了）。
- 升级截图输出为 `binary`，兼容 `2.9.9` 前的 `base64`。
- 添加字体的自定义方式，通过覆盖 `public/fonts/HN-Font.{suffix}` 字体文件实现改变字体，建议使用 `woff2` 或者 `woff`
  格式字体,可以在[字体转换器](https://fontconverter.com/zh/)站点进行字体的转换。

## 2023/05/23

- 兼容新版动态的css选择器，以尝试修复B站动态截图时的css选择器报错。
- 将更新日志迁移至 `CHANGELOG.md` 文件中。

## 2023/05/22

- 优化代码；
- 去除订阅推送报错时向 BOT 主人发送的消息。

## 2023/04/08

- 优化截图像素低的问题；
- 去掉 `sharp` 依赖，
- `2` 类型摸鱼图已不返回 `webp` 图。

## 2023/04/01

- 优化 `@全体` 功能，可以不再依赖主项目的 `2.9.4` 版本，以及主项目的 `atUser` 配置。

## 2023/04/01

- 增加 `filterContent` 配置，默认过滤开奖动态；
- 增加 `#sat`、`#unsat` 指令 设置/取消允许推送直播信息时`@全体成员`
  （该功能依赖主项目`2.9.4`版本）。

## 2023/04/01

- 修复直播相关类型动态未渲染；
- 修复未正确使用小会员图标问题；
- 优化直播的状态的图标。

## 2023/03/31

- 修复宽度限制导致的错位问题。

## 2023/03/29

- B站的推送增加一种渲染方式，该渲染方式几乎复刻官方App的分享图，可通过设置新增配置 `screenshotType: 2`
  使用该配置(默认值为1)。

## 2023/03/23

- ⚠️适配主项目的 `2.9.3` 版本（⚠️注意：插件此次更新属于大版本更新，需要将配置文件删除重新生成，或者手动按照提供的格式更改)。

## 2022/10/07

- 支持插件的别名更新

## 2022/09/21

- 更换获取B站直播间状态的 API 以尝试修复获取个人信息的直播信息时的 401 错误。

## 2022/09/20

- 修复B站常规动态截图失败的问题。

## 2022/09/17

- 修复获取B站个人信息时的 401 错误。

## 2022/08/22

- 增加60秒看新闻图订阅源；
- 增加 `vvhanCdn` 配置功能。

## 2022/07/25

- 增加推送限制功能；
- 优化API出错时的日志打印。

## 2022/07/15

- 修复使用 `原神` 作为订阅源会无法生效的问题；
- 修复查看订阅列表时消息服务中包含空订阅的问题。

## 2022/07/15

- 更换摸鱼 API 使其海外可用。

## 2022/07/14

- 修复摸鱼日报的初始化配置错误问题；
- 修复摸鱼日报数据兼容问题；
- 修复摸鱼日报的缓存未设置有效期导致持续使用缓存数据问题。

## 2022/07/13

- 修复定时任务的 `cron` 规则配置刷新指令无法生效的问题；
- 增加摸鱼日报功能，可在 `hot_news.yml` 中启用该功能，默认不启用；

## 2022/07/11

- 修复订阅B站时格式错误导致推送等无法使用的问题；
- 增加 `#rms` 指令移除某个群的订阅(私聊中 BOT 管理员权限可用)。

## 2022/07/07

- 优化群消息订阅的权限为群管理员而不是 BOT 管理员。

## 2022/06/25

- 修复直播推送的消息模版无法获取到 `name` 参数的问题，变更UP名称的参数名为 `up_name` 。

## 2022/06/24

- 移除 `isSendUrl` 配置；
- 增加推送消息模版配置，通过此配置可自行 DIY
  你需要的信息，具体配置可参考 [模版消息配置](https://github.com/BennettChina/hot-news#%E6%A8%A1%E7%89%88%E6%B6%88%E6%81%AF%E9%85%8D%E7%BD%AE)
  。

## 2022/06/16

- 增加 `isSendUrl` 配置控制是否发送动态的访问链接。

## 2022/06/15

- 修复直播频繁推送的问题。

## 2022/06/14

- 插件B站订阅查询任务配置化，可自行配置定时任务的执行规则。

## 2022/06/12

- 插件的订阅管理支持控制台管理（依赖 `BOT` 的 `2.4.1` 版本 ）

## 2022/06/07

- 优化 `#mysl` 指令，返回的 B 站订阅 UP 列表加入该 UP 的 uid 。

## 2022/06/03

- 增加 `#mysl` 指令查看用户订阅的信息。

## 2022/05/30

- 修复清理旧版本原神的订阅数据时未完全将旧订阅数据添加到新的 `key` 中（已升级的用户解决方案是重新订阅 `原神` ）。

## 2022/05/28

- 修复无法使用指令刷新配置、直播推送bug、初始化产生的缓存问题、取消B站订阅时会把该用户所有B站订阅都取消的问题；

## 2022/05/28

- B站的订阅改为多选，可通过订阅up的uid来实现订阅该up的动态和直播；
- 增加 `hot_news.yml` 配置文件，通过 `maxSubscribeNum` 设置每个用户B站订阅数量的最大值，默认为5个。
- 限制B站动态推送的默认值设置为24小时。

## 2022/05/23

- 截图改为截默认的PNG图（经过缓存优化，不再频繁截图，性能应该不成问题，jpeg图还是太糊了）。

## 2022/05/23

- 修复动态只会推送给单个用户或者群聊的问题；
- 将动态截图缓存起来，不再每个用户再截图一次，减少截图次数。

## 2022/05/23

- 修复热点新闻的定时任务时间错误问题。

## 2022/05/22

- 重构代码，是代码更整洁方便阅读。增加 `#lgdn` 指令指定原神动态过时时间，发布时间过去该时间的动态将不再推送（常规情况不需要设置，服务器经常出现长时间满负载导致推送失败才需要考虑设置该值）。

## 2022/05/20

- 修复渲染图片出错时异常栈信息未打印导致无法分析问题

## 2022/05/17

（⚠️ 本次更新依赖于BOT项目的 `2.3.6` 版本，请确保你的BOT项目版本为 `2.3.6` 以上）

- api调用增加缓存
- 启动浏览器使用重构后的方式，其他插件使用同一个浏览器

## 2022/05/16

- 修复因为B站审核问题导致动态时间错误判断而无法推送的问题。

## 2022/05/13

- 增加B站原神动态订阅

## 2022/04/14

- 新闻推送时间优化为8:30~9点。

## 2022/04/14

- 修复初始权限太高导致私聊订阅常规用户无法订阅的问题，改为群里使用管理员权限，私聊使用常规用户权限。